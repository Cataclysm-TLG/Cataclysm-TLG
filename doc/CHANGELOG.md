# Changes in The Last Generation

Cataclysm: The Last Generation is forked from a March 2024 build of Cataclysm: Dark Days Ahead ( https://github.com/CleverRaven/Cataclysm-DDA ). The changelog below details additions which have been made that diverge from Dark Days Ahead.

The changelog does not include backports from DDA. We will attempt to keep as current as possible with DDA and backport what we can so long as it fits our design goals, however as our two games diverge, fewer and fewer things will be backported.

## Major changes

> [!CAUTION]
> There is no intended compatibility with Cataclysm: Dark Days Ahead saves and mods.
> While simple mods *may* continue to work, if they break, you get to keep both pieces.
> There is absolutely no support for trying to make DDA saves work.

- Removed imgui
  - DDA's implementation of imgui was at the time of the fork (and at the time of this writing) incomplete. In addition to disrupting the visual style of the game, it introduced many bugs and performance issues, and slowed the speed at which the game loads dramatically. As a result, TLG's menu system is more stable and the game loads more quickly.
- Removed several mods
  - Most major mods have been removed from the game, as I do not have time to both develop the game and maintain huge mods for it that I don't even use. If an experienced Cataclysm contributor is interested in porting and/or maintaining one of DDA's mods, please contact worm girl.
  - NPC needs have been disabled by default, so DDA's `no_npc_needs` mod has been removed.
  - `personal_portal_storms` has been removed, as TLG does not have portal storms.
- Improved monster crit resistance. Critical hits in Cataclysm became essentially guaranteed above a relatively modest skill level, ballooning player damage far higher than was ever intended. This was partly because monsters were only able to resist critical hits using their effective dodge score. As the strongest monsters in the game are mostly 2000 pound tanks, and even beyond them, few enemies have more than 3 or 4 dodge, this made enemies far too easy to kill. Now, monsters check the higher of their dodge or melee. Dodge is generally more effective at resisting critical hits, but can be debuffed or disabled by things like snares or the downed effect. Melee doesn't have this problem, but point-for-point confers less resistance.
- Added the EXPLOSIVE activity level to better simulate the strain of combat. Attacking, dodging, and smashing corpses now significantly contribute to weariness. Survival means picking your battles and only smashing the corpses you actually need to keep down. Firearms are much less fatiguing to use against large numbers of enemies.
- Made shooting not entirely deterministic. Ranged attacks in DDA function via a system called dispersion. An enormous number of factors add to or reduce the final dispersion of a ranged attack, but these factors are never random. This means that an enemy standing N tiles away from a character who aims at them for P turns will always take the exact same damage, assuming the same gun, ammo, character stats, etc. Because enemies are constantly moving around and factors like recoil and light are always changing, this can make it hard to notice, however it was preventing some guns from dealing proper crit damage even though they should definitely be able to do so, and it was giving monsters what looked like unerring accuracy; Since they lacked so many of the mechanics being checked for characters, they would often hit the same body part over and over for the same or very similar damamge.
 - The new system functions as the old, but adds a random +/- to the final total which makes ranged combat much less predictable. This random factor is weighted toward the negative, but 
   becomes even at around 18 perception and becomes slightly weighted for positive (at which point it is capped) at 20 effective perception. A reduced sight or manipulation score will 
   count against your perception. This does a much better job of simulating the chaos of ranged combat and in practice means that ferals will miss sometimes and turrets will often hit 
   you once in a burst instead of lasering every single shot directly into your solar plexus. Is also makes perception actually matter.
- Stamina now affects block chance. Previously, a character would attempt to block 100% of the time at 5 melee. This is still the case (for now) at 100% stamina, but as stamina falls, so too does block chance, though at 10 melee, a character will always attempt to block unless winded.
- The base healing rate has been cut by 10%, and similar reductions have been made in the bonuses from mutations and lifestyle. Bandages and disinfectant have gone from 2-16 to 2-9. Their base effectiveness remains the same, but their scaling bonus has been cut by 50%. Vitamins no longer give a guaranteed +6 lifestyle per day total, they now average +2.6 total if you get all three of your DRVs.
- Exodii have been removed. Personally, I appreciated the writing of DDA's Exodii, but found them to be a bad fit for the game as they take the focus off of procedural world exploration and shift it to repeated visits to the same static NPC. They also run counter to our theme, which is more backyard sci fi and conspiracy and less alien invasion.
  - Same for the Yrax, but these are a much smaller faction.
- CBMs have been returned to labs, hospitals, and a few other locations. TLG is set more or less in the present year, but major leaps have been made in a few technological fields thanks to the suspiciously rapid progress of biotechnology. This technology had only just barely begun to hit the market, but promises of next-generation tech have been closer to reality ever year.
- Lab adjustments: Old-style labs have made a return, and lab towers are now much more common. Subway labs are now much less common, and are no longer packed with hundreds of zombies. This should go a long way toward improving slowdown during gameplay up on the surface.
- Portal storms have been removed. While an interesting idea, these were designed to throw a lot of threats at you that are simply best avoided. The fact that every storm included every type of threat meant they all got old fast, and they too frequently interrupted more interesting gameplay. There are plans to add supernatural weather effects which are more varied and less intrusive to stand in for the reality-bending nature of the Cataclysm.
- Robots are once again a part of the lore, and may be found still mindlessly serving their pre-Cataclysm roles, be that enforcing the law, surveiling the public, or gunning down anything that moves.
- Apocalyptic regional settings. The Cataclysm was a slow process that took decades to build up before exploding into a zombie apocalypse. In that time, supply lines eroded, the climate shifted, crops failed, and plant life began to die while people and animals slowly began mutating. The natural world is no longer pristine, and the weather is much harsher.
- Greatly reduced food items spawning in the world, and set the spawn date for all items to at least a few days before the start of the game. Food was running out a year before the dead began to walk. Panic buying, hoarding, and infighting made it difficult for governments to get supplies to their people. Homes are no longer totally stocked with all the food you could ever want. There are no longer fresh-baked cakes sitting out in areas that have been overrun by the undead for days or weeks.
- Foraging is much more difficult. Fruit-bearing plants are harder to come by, and finding ones that aren't picked over or totally bare is hard work that requires a bit of survival and perception.
- Skill rust has been removed. This was never a good mechanic. DDA's attempts to revive it were met with widespread resistance, and it was then nerfed to become a "bonus" that hardly counted for anything at all. Cataclysm games do not last long enough to model any sort of realistic skill rust, and constantly losing skills is not a fun experience, so the whole system is gone.
- Created a system to handle liquid attacks, which can now be properly dodged and behave logically according to the breathability and coverage of a character's armor. This was done to improve the behavior of bile and acid (ubiquitous threats in the Cataclysm), but can theoretically work for a wide variety of fluids.
- Acid overhaul
  - Acid does damage over time, can temporarily blind you if it gets in your eyes, affects your lifestyle score, and most importantly, has a low chance to damage your equipment. Protecting yourself and your things from acid now relies on wearing equipment which has low breathability and/or high acid resistance, especially on your outermost layers. Luckily, acid is now properly dodgeable in all cases and most acid-spitting enemies have limited range.
  - Acid puddles also use this system, splashing onto your feet. Characters who are prone or otherwise lower to the ground may find that puddles are more dangerous. In either case, the puddles last much less time.
- Bile overhaul
  - Bile has a low chance to make worn equipment filthy when it strikes you. If it contacts your skin, it will cause nausea and make it easier for scent-tracking monsters to find you, and it can cause temporary blindness or even conjunctivitis if it gets in your eyes. Wearing non-breathable or disposable clothing on your outer layers can protect you and your gear from getting dirty, but bile can be dodged in all cases.
  - Bile on the floor can cause you to slip and fall. The chance is very low, but is exacerbated by high foot encumbrance, impairments to your balance, low dexterity, smooth, flat terrain (such as sidewalks or wooden floors) or running.
- Added grappling. Enemies can be grabbed with the (G) key and thrown with the (t) key. Grabbed enemies are unable to dodge, but beware - grappling requires two free hands and penalizes your own ability to dodge, and grappling burns a lot of stamina. Grappling relies on strength, dexterity, melee, and unarmed skill, while throwing creatures relies on strength, relative size category, unarmed, and throwing skills. Thrown creatures take (and deal!) damage proportional to their size and the distance they are launched. Shoving someone a tile or two might not hurt them at all, while throwing a zombie ten tiles is a superhuman feat that might kill them outright or smash them through a wall!
  - Some martial arts techniques require the attacker to be grappling the target. A new attack (strangle) has been added to the Brawling martial art to take advantage of this.
  - NPCs currently do not grapple. Monsters use the same systems they always have.
- Armor has had a major overhaul, mostly to combat power creep, but also to modernize and in some cases simplify the system. DDA made several cool additions to the armor system over the years, but these introduced power creep that eventually had characters walking around with 40+ armor on every body part. To compete with this, monsters started getting abilities such as impale or obnoxious amounts of armor penetration, meaning that much of the time, all that cool armor you had wasn't even doing anything!
  - Many armor pieces now occupy multiple layers, encumbrance values are generally higher across the board, and coverage has been reduced.
  - Armor values have been adjusted for some materials.
  - Armor material thickness has been audited with more consistent guidelines. See [ARMOR_BALANCE_AND_DESIGN.md](ARMOR_BALANCE_AND_DESIGN.md)
  - Extraneous armor pieces have been removed. There is a fine line between simulating as much as possible and creating crafting menu lists that are impossible to navigate or understand.
  - Made several improvements and bugfixes to the underlying system, many concerning how fire and acid are handled.
  - Made outgoing bash damage far less likely to damage the attacker's clothing when using unarmed combat. While it makes a degree of sense that these items would be damaged in combat, kicking a couple of people is not going to atomize your blue jeans.
  - The Hub-01 MDS has been removed for not meeting realism or legibility standards. It was a good example of what sort of things are possible with the armor system, but its form factor did not make sense in-universe, and on the user side it was almost impossible for most players to understand how effective the armor even was. It was extremely good, as it turns out, and handing that sort of thing out for free runs counter to our design principles. If you want good gear, you need to get very lucky or put in the work.
  - Reworked Faraday armor, which is relatively simple to make if one has the skills and components. It consists of nothing more than a suit of chainmail or plate mail, a cleansuit, and some wire. This armor perfectly shuts out electricity so long as the user is grounded, meaning they must be standing on solid ground and not in water.
  - Survivor gear has been reimagined and re-implemented as (mostly) soft armor which aims to use commonly-available materials to protect from zombie attacks, including bites and acid. It lacks the ballistic protection of military armor and is not as protective against melee as medieval armor, but it strikes a balance that should make it an attractive option for any survivor.
- Moved most mutation attacks to attack techniques. These automatically fire in combat, but will happen instead of your normal attack, not in addition to it. This can be good or bad, but these attacks are generally quite powerful and quick. Mutation attacks almost always use the unarmed skill, and in many cases there are ways to reduce or increase the chance of using them.
  - In many cases, having a matching muzzle will increase the effectiveness of any biting mutation.
- Made point buy the chargen default, but freeform can be freely selected if desired. Survivor mode was simply not doing a good enough job of telling the player what they were actually getting. It called nonsensical things overpowered and grossly overestimated certain traits or abilities. A system that lies to you is worse than an imperfect system or no system at all, and in my opinion, point buy was a fun part of the game.
  - Point values will be undergoing an audit and "free" penalties such as truth teller are being reworked or removed.
- Removed Catalyst and Primer. Now there is only Mutagen and Mutagenic Infusion. Mutagen is the less pure, weaker version, infusion is stronger and more pure. You only need to take one drug to mutate, no more babysitting two confusing chemicals.
- Removed many pointless variant animals, pruned out bloat and redundant monsters. Dogs now come in three varieties (tiny, small, and medium) and cats in one. There is only one frog and one mutant variety of that frog. Putting shock/acid/poison/sludge variants of every single enemy in the game just makes different locations more homogenous, and homogenity is bad. Instead, we aim to make a smaller number of enemies more interesting and unique.
  - Improved HP for pet animals, especially dogs.
  - Added trained versions of the small and medium dog, the attack and guard dog. These are stronger, tougher, and braver. You cannot currently train your own animals, but that is planned.
  - Mutant dogs and cats still exist because those are funny and cool.
  - Improved mutant slugs and snails. They now spread sludge instead of acid. The snail has a harpoon attack that pulls you close, and the slug has a poison attack. Both are more dangerous than they previously were. The sludge crawler is now properly killable if lit on fire.
  - Improved mutant crows and placed them in many more locations, especially rooftops.
  - Removed all monsters smaller than a rat. There is no point in having a hummingbird use the monster system, it is not a creature that has any significance to gameplay whatsoever. In some cases, animals like (non-mutated) snails still appear, however these are represented using the item system and not as monsters. An exception is currently being made for fish fry and tadpoles as the monster system is integral to their life cycle. Expect that to change eventually.
- Removed the Shadow boss encounter. While an interesting and well-written addition to DDA, it doesn't fit our lore, and I don't think the way it's forced on every single character harms replay value and treats the player character like the center of the universe. Something similar may eventually make a reappearance, but it will not be something that seeks you out every run.
- Plant and Elf-A mutants can photosynthesize, receiving kcal from standing in sunlight relative to the amount of skin they have exposed, or covered only by transparent items. The kcal values are fairly small for Elf-A, usually capping out at around 70/day in Summertime, but can approach 300/day for a fully mutated Plant. This is not enough to survive on, but especially for Plants (who need very little kcal to begin with), sleeping in the sun may make life a lot easier.
  - LEAVES mutations will die off in fall, go bare in winter, and regrow in spring. This affects photosynthesis and wet effects and will eventually be used in heat regulation and metabolism.
- Removed the Isolated Artisans and their associated items. These characters were essentially a way to prevent the player from actually having to do any crafting to get the best armors in the game, and provided far too ready access to ammmunition.
- Steel variants have been removed. This system created a massive amount of work on the dev/contributor end for very marginal benefit, introduced a ton of errors as item definitions had to be copied five or more times for all material definitions, and contributed significantly to power creep while giving players the expectation that they should always only be using the best stuff, making at least two of the steel types totally pointless. Variants are planned for eventual re-introduction with a smarter system that can change the base stats and materials of an item on the fly.
- Removed several practice recipes and some associated profiencies.
  - Wound Care/Advanced Wound Care have been replaced by Field Medic, which improves tending speed but does not improve effectiveness. Intelligence or perception above 10 now provide a small bonus to bandaging and disinfection, respectively.

## Minor changes

- Foodplace, Foodperson, and all references to such have been deleted.
- Poison ivy was added as a naturally spawning trap, afflicting you with a rash if it touches bare skin.
- Strange temples have been removed due to being incompatible with the lore.
- Nearly all item variants have been removed, greatly reducing filesize and general bloat. It's up to you to decide what's printed on your t-shirt.
    - A blanket exception has been made for things like halloween masks and flags, which only exist because of their variants.
- Removed autonote from nearly all map extras - exploration should be immersive and these locations ought to feel like an actual part of the environment, not map markers.
- Zombie animals have simpler and more descriptive names, e.g "zombie deer" instead of "woodland wight".
- Greatly reduced wear and tear to the attacker's clothing when fighting unarmed.
- Small and tiny characters now have stomachs big enough to actually feed themselves.
- Reduced HP for small and tiny characters.
- Moved the bionic professions mod to mainline, as bionics are technology which was starting to become available just before the Cataclysm.
- Made pounce and leap mutations actually functional, dramatically increasing the power of feline, batrachian, bird, and rabbit mutations.
- Audited the spawn rate of many wild animals and other less-consequential creatures, which should cut down on lag without harming food supplies.
- Added tempered glass as a new and more durable material for car windshields.
- Cleaned up, improved, and pruned a bunch of constructed terrain and its associated recipes.
- Made trapdoor spiders detectable with perception/devices or ground-penetrating sonar.
- Adjusted Light Step so that it reduces but does not effectively silence your footfalls.
- Gave fields the ability to cast spells, greatly expanding what is possible with the field system.
- Nerfed crowd crush. You now need to be surrounded on most sides by enemies or walls to be crushed.
- Updated snap targeting (in ranged combat) to move the camera. It was previously not doing this and leading to issues where aiming across Z-levels caused bugs.
- Updated grenades to have much saner damage radii. Being very close to a grenade is usually going to be lethal, but they're no longer mininukes. Expect a grenade thrown into a zombie horde to kill 3-9 and wound many more, rather than killing 30+ as they did in DDA. Pipebombs are still the weapon of choice for more armored enemies.
- Improved the behavior of HOOD, POCKETS, and COLLAR flags to provide warmth in more situations. Items with the HOOD flag will not provide warmth if you're wearing something on the same layer on your head.
- Updated cloak and blanket-type items to have proper coverage and layer data, as well as in most cases the POCKETS flag, giving them the ability to warm your hands.
- Updated gas stations to no longer give out free gas, but ensured that each one has a payment terminal and a tank to draw from. Characters will no longer spill gas all over the place like Mr. Bean unless they have the CLUMSY trait or something is wrong with their hands.
- Made the wacky servant/maid enemies only spawn in the "Mansion Escape" scenario. Most mansions are just full of zombies. It would be nice to make the Mansion Escape building findable as a global unique in a normal run, but for now that isn't the case.
- No more humanoid aliens. There is nothing humanoid out there that is friendly, either. As such, grackens have been removed.
- Starting a fire now always needs tinder if the thing you want to light on fire does not have the `TINDER` flag. This generally includes liquid fuels, paper, and other easily ignitable items. This flag has been added to many items, and will be given to more things that ought to have it as we come across them.
- Missed melee attacks no longer damage your weapon.[[1]](https://github.com/CleverRaven/Cataclysm-DDA/pull/54439)
- New monster: glowstalk. An unviable portal monster, it can be encountered with other nether monsters of that kind.
- Adjusted reload time for guns and magazines, adding stricter skill-based scaling to reload speed penalties and reducing the speed of loading cartridges into magazines overall.
- Stat descriptors have been added to aid understanding, for example, if you had 0 strength, it would show up as "Helpless", while 16 strength would be "World-Class". See [GAME_BALANCE.md](GAME_BALANCE.md)
- Tons and tons of back-end infrastructural changes to itemgroups, ids, mapgen, etc.
- Removed DDA's tutorial character, Liam. TLG is not interested in hand-holding: While we will keep quests and NPC factions, the story is meant to be told by the player, not to the player.
